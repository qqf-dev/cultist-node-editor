<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>节点编辑器</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <div class="sidebar">
        <div class="node-palette">
          <h3>节点类型</h3>
          <button class="node-type" onclick="addNode('recipes')">
            📖 recipe
          </button>
          <button class="node-type" onclick="addNode('elements')">
            📇 element/aspect
          </button>
          <button class="node-type" onclick="addNode('decks')">
            🗃 deck
          </button>
          <button class="node-type" onclick="addNode('verbs')">
            ⚡ verb
          </button>
          <button class="node-type" onclick="addNode('text')">
            📝 文本
          </button>
        </div>

        <div class="node-palette">
          <h3>操作</h3>
          <button
            class="btn btn-secondary"
            style="width: auto"
            onclick="testCommunication()"
          >
            🔌 通讯测试
          </button>
          <button
            class="btn btn-secondary"
            style="width: auto"
            onclick="generateTest()"
          >
            🧪 生成测试
          </button>
          <button
            class="btn btn-secondary"
            style="width: auto"
            onclick="toggleConsole()"
          >
            🔍 控制台
          </button>
          <button
            class="btn btn-secondary"
            style="width: auto"
            onclick="customCheck()"
          >
            ⚙️ 自定义检测
          </button>
          <button class="btn btn-secondary" onclick="generateTest()">
            💾 保存为 JSON
          </button>
          <button class="btn btn-secondary" onclick="loadGraph()">
            📂 加载 JSON
          </button>
          <button id="btn-readMod" class="btn btn-secondary" onclick="readMod()">
            🔧 读取mod
          </button>
          <button class="btn" onclick="clearCanvas()">
            🗑️ 清空画布
          </button>
        </div>

        <div class="node-palette">
          <h3>状态</h3>
          <div id="status">等待命令...</div>
        </div>
      </div>

      <div class="editor-area">
        <div class="toolbar">
          <button
            class="btn"
            style="width: auto"
            onclick="addTestNode()"
          >
            添加测试节点
          </button>
          <button
            class="btn"
            style="width: auto"
            onclick="addBlankNode()"
          >
            引入json文件
          </button>
          <button
            class="btn"
            style="width: auto"
            onclick="addTestNode()"
          >
            引入素材文件
          </button>
          <button
            class="btn"
            style="width: auto"
            onclick="addTestNode()"
          >
            原版游戏文件（！如果修改过请引用修改后的文件）
          </button>
          <span style="margin-left: auto; font-size: 12px; color: #888"
            >节点编辑器 v0.1</span
          >
        </div>

        <div class="canvas" id="canvas">
          <!-- 这里将显示节点 -->
          <div
            id="placeholder"
            style="
              position: absolute;
              top: 50%;
              left: 50%;
              transform: translate(-50%, -50%);
              text-align: center;
              color: #666;
            "
          >
            <div style="font-size: 48px; margin-bottom: 16px">🧩</div>
            <div style="font-size: 16px; margin-bottom: 8px">
              节点编辑器已就绪
            </div>
            <div style="font-size: 12px">
              从左侧面板添加节点，或点击上方按钮添加测试节点
            </div>
          </div>
        </div>

        <div class="status-bar">
          <span id="status-text">就绪</span>
        </div>
      </div>
    </div>

    <script src="webview.js"></script>
    <script src="basicOP.js"></script>

  </body>
</html>
